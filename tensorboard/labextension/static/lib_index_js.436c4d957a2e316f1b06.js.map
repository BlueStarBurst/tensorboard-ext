{"version":3,"file":"lib_index_js.436c4d957a2e316f1b06.js","mappings":"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","sources":["webpack://tensorboard/./src/index.ts"],"sourcesContent":["import { IDisposable, DisposableDelegate } from '@lumino/disposable';\n\nimport { Widget } from '@lumino/widgets';\n\nimport {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\n\nimport { DocumentRegistry } from '@jupyterlab/docregistry';\n\nimport {\n  NotebookPanel,\n  INotebookModel,\n  INotebookTracker,\n  NotebookActions,\n} from '@jupyterlab/notebook';\n\n/**\n * Initialization data for the jupyter-tensorboard extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupyter_tensorboard:plugin',\n  description: 'A JupyterLab extension.',\n  autoStart: true,\n  requires: [INotebookTracker],\n  activate: activate\n};\n\n/**\n * A notebook widget extension that adds a widget in the notebook header (widget below the toolbar).\n//  */\nexport class WidgetExtension\n  implements DocumentRegistry.IWidgetExtension<NotebookPanel, INotebookModel> {\n  /**\n   * Create a new extension object.\n   */\n  createNew(\n    panel: NotebookPanel,\n    context: DocumentRegistry.IContext<INotebookModel>\n  ): IDisposable {\n    const widget = new Widget({ node: Private.createNode() });\n    widget.addClass('jp-myextension-myheader');\n\n    panel.contentHeader.insertWidget(0, widget);\n    return new DisposableDelegate(() => {\n      widget.dispose();\n    });\n  }\n}\n\n/**\n * Activate the extension.\n */\nfunction activate(app: JupyterFrontEnd, notebookTracker: INotebookTracker) {\n  // Nothing is needed\n  console.log('JupyterLab extension jupyter-tensorboard is activated!');\n\n  startWS(notebookTracker);\n\n  // const ws = new WebSocket('ws://localhost:3000');\n  // ws.onopen = () => {\n  //   ws.send(JSON.stringify({ type: 'jupyter', data: '' }));\n  //   clearInterval(interval);\n  // };\n  // ws.onmessage = event => {\n  //   console.log('Message from server ', event.data);\n  //   const data = JSON.parse(event.data);\n  //   switch (data.type) {\n  //     case 'runCell':\n  //       // run cell at index\n  //       console.log('Running cell ' + data.data);\n  //       // Private.runAll(notebookTracker);\n  //       Private.runCell(notebookTracker, data.data, ws);\n  //       break;\n  //     case 'setNotebook':\n  //       Private.setNotebook(notebookTracker, JSON.parse(data.data));\n  //       break;\n  //     default:\n  //       console.log('Unknown message');\n  //   }\n  // };\n  // }, 1000);\n\n  app.docRegistry.addWidgetExtension('Notebook', new WidgetExtension());\n}\n\nfunction startWS(notebookTracker: INotebookTracker) {\n  const ws = new WebSocket('ws://localhost:3000');\n  ws.onopen = () => {\n    ws.send(JSON.stringify({ type: 'jupyter', data: '' }));\n  };\n  ws.onmessage = event => {\n    console.log('Message from server ', event.data);\n    const data = JSON.parse(event.data);\n    switch (data.type) {\n      case 'runCell':\n        // run cell at index\n        console.log('Running cell ' + data.data);\n        // Private.runAll(notebookTracker);\n        Private.runCell(notebookTracker, data.data, ws);\n        break;\n      case 'setNotebook':\n        Private.setNotebook(notebookTracker, JSON.parse(data.data));\n        break;\n      default:\n        console.log('Unknown message');\n    }\n  };\n  ws.onclose = () => {\n    console.log('WebSocket closed');\n    ws.close();\n    setTimeout(() => startWS(notebookTracker), 1000);\n  };\n  ws.onerror = () => {\n    console.log('WebSocket error');\n  };\n}\n\n// /**\n//  * Export the plugin as default.\n//  */\nexport default plugin;\n\n// /**\n//  * Private helpers\n//  */\nnamespace Private {\n  /**\n   * Generate the widget node\n   */\n  export function createNode(): HTMLElement {\n    const span = document.createElement('span');\n    span.textContent = 'If you are seeing this, the extension is working!!';\n    return span;\n  }\n\n  export function runAll(notebookTracker: INotebookTracker) {\n    if (notebookTracker.currentWidget) {\n      const sessionContext = notebookTracker.currentWidget.sessionContext;\n      if (sessionContext) {\n        NotebookActions.runAll(\n          notebookTracker.currentWidget.content,\n          sessionContext\n        );\n        console.log('Running cells');\n      }\n    }\n  }\n\n  export function runCell(\n    notebookTracker: INotebookTracker,\n    index: number,\n    ws: WebSocket\n  ) {\n    if (\n      notebookTracker.currentWidget &&\n      notebookTracker.currentWidget.content\n    ) {\n      const realCell = notebookTracker.currentWidget.content.widgets.at(index);\n      realCell?.activate();\n      realCell?.ready.then(_ => {\n        if (\n          notebookTracker.currentWidget &&\n          notebookTracker.currentWidget.content\n        ) {\n          const sessionContext = notebookTracker.currentWidget.sessionContext;\n          notebookTracker.currentWidget?.content.deselectAll();\n\n          notebookTracker.currentWidget?.content.select(realCell);\n\n          NotebookActions.runCells(\n            notebookTracker.currentWidget.content,\n            notebookTracker.currentWidget?.content.selectedCells,\n            sessionContext\n          ).then((val: boolean) => {\n            ws.send(\n              JSON.stringify({\n                type: 'setOutput',\n                data: realCell.model.sharedModel.toJSON()\n              })\n            );\n          });\n        }\n      });\n    }\n  }\n\n  export function setNotebook(\n    notebookTracker: INotebookTracker,\n    json: any,\n    test: string = 'test'\n  ) {\n    // json = JSON.parse(json);\n    json.metadata.orig_nbformat = 4;\n    console.log(json);\n    console.log(test);\n    // json = JSON.stringify(json);\n    notebookTracker.currentWidget?.content.model?.fromJSON(json);\n  }\n}"],"names":[],"sourceRoot":""}